# Azure Cosmos DB NoSQL Vector Search Sample (.NET)

This console application demonstrates vector search capabilities in Azure Cosmos DB for NoSQL using the .NET SDK. It showcases hybrid and vector search using **Flat**, **QuantizedFlat**, and **DiskANN** index types.

## Features

*   **Vector Search**: Demonstrates similarity search using embeddings generated by the **Azure OpenAI client**.
*   **RBAC Authentication**: Uses **Microsoft Entra ID** and DefaultAzureCredential for secure, keyless access.
*   **Index Algorithms**: Compares different vector indexing policies.

## Prerequisites

*   **Azure Resources**: Cosmos DB for NoSQL account (Vector Search enabled) and Azure OpenAI resource.
*   **Permissions**: Your identity must have **Cosmos DB Built-in Data Contributor** role.
*   **Infrastructure**: The Hotels database and required containers must be pre-created.


## Provisioning Resources

This project is configured to run with the Azure Developer CLI (azd), which provisions the required Azure resources and generates the \ppsettings.json\ file for you.

To provision resources:

1.  Open a terminal in the root folder of this repository (where \zure.yml\ is located).
2.  Run the following command:
    \\\ash
    azd up
    \\\
    Follow the prompts to select your Azure subscription and environment.

**What is provisioned:**

*   **Azure Cosmos DB for NoSQL**: Serverless account with the \Hotels\ database.
    *   3 Containers: \hotels_flat\, \hotels_quantizedflat\, \hotels_diskann\.
*   **Azure OpenAI**: Resource with deployments for:
    *   Embedding model: \	ext-embedding-3-small\
    *   Chat model: \gpt-4o-mini\
*   **Managed Identity**: User-assigned identity for secure access.
*   RBAC assignments for Keyless authentication.


## Configuration

Update ppsettings.json with your service endpoints:

`json
{
  "AzureOpenAI": {
    "Endpoint": "https://<your-openai-endpoint>.openai.azure.com",
    "EmbeddingModel": "text-embedding-3-small"
  },
  "CosmosDb": {
    "Endpoint": "https://<your-cosmos-endpoint>.documents.azure.com:443/",
    "DatabaseName": "Hotels"
  }
}
`

## Running the Application

1.  Navigate to the project folder:
    `ash
    cd nosql-vector-search-dotnet
    `
2.  Run the application:
    `ash
    dotnet run
    `
3.  Select an option from the menu (1 to embed, 3-5 to search).

